<?php require('utils.php');#printVars();$login = $HTTP_GET_VARS['login'];$file = $HTTP_GET_VARS['file'];function getSentences($login,$file) {	global $SENTENCES_TABLE;	$query = "SELECT * FROM $SENTENCES_TABLE WHERE file='$file';";	$rows = dbSelect($query, 'getSentences');	return $rows;}function getAnnotations($login, $file) {	global $RELTYPES_TABLE;	$query = "SELECT * FROM $RELTYPES_TABLE WHERE file='$file';";	$rows = dbSelect($query, 'getAnnotations');	$annotations = Array();	foreach ($rows as $row) {		$lid = $row[1];		$ann = $row[2];		$rel = $row[3];		$annotations[$lid][$ann] = $rel;	}	return $annotations;}function getAdjudications($login, $file) {	global $ADJUCATED_RELTYPES_TABLE;	$query = "SELECT * FROM $ADJUCATED_RELTYPES_TABLE WHERE file='$file';";	$rows = dbSelect($query, 'getAnnotations');	$annotations = Array();	foreach ($rows as $row) {		$lid = $row[1];		$rel = $row[3];		$annotations[$lid]['adj'] = $rel;	}	return $annotations;}function getRelType($login, $lid, $annotations) {	return $annotations[$lid][$login];}#	global $useTimeBank;#	if ($annotations[$lid][$login]) {#			return $annotations[$lid][$login];#	} elseif ($useTimeBank) {#		return $annotations[$lid]['tb'];#	} else {#		return 'UNKNOWN';#	}function shortenRel($rel) {	if ($rel == 'BEFORE') { return 'B'; }	elseif ($rel == 'AFTER') { return 'A'; }	elseif ($rel == 'OVERLAP') { return 'O'; }	elseif ($rel == 'UNKNOWN') { return 'U'; }	elseif ($rel == 'VAGUE') { return 'V'; }	elseif ($rel == 'NON-RELATED') { return 'NR'; }	elseif ($rel == 'BEFORE-OR-AFTER') { return 'BA'; }	elseif ($rel == 'BEFORE-OR-OVERLAP') { return 'BO'; }	elseif ($rel == 'OVERLAP-OR-AFTER') { return 'OA'; }	else { return $rel; }}?><!doctype html public "-//W3C//DTD HTML 4.0 //EN"> <html><head><title>TempEval Document <?php echo $file ?> (<?php echo $login ?>)</title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><link href="tempeval.css" rel="stylesheet" type="text/css"></head><body><h2>TempEval Document <?php echo $file ?></h2><hr><FORM action="adminSubmit.php" method="post"><input type="hidden" name="login" value="<?php echo $login; ?>" /><input type="hidden" name="file" value="<?php echo $file; ?>" /><?php	$sentences = getSentences($login,$file);	$annotations = getAnnotations($login,$file);	$adjudications = getAdjudications($login,$file);	echo "<table cellpadding=3 border=0>\n";	$count = 0;  	foreach ($sentences as $sentence) 	{		$count = $count + 1;		$id = $sentence[1];		$lid = $sentence[2];		$string = $sentence[3];		$annotators = array_keys($annotations[$lid]);		$rel1 = getRelType($annotators[0], $lid, $annotations);		$rel2 = getRelType($annotators[1], $lid, $annotations);		$rel3 = getRelType($annotators[2], $lid, $annotations);		$rel1 = shortenRel($rel1);		$rel2 = shortenRel($rel2);		$rel3 = shortenRel($rel3);				echo "<tr>\n";		echo "  <td valign=top>$id\n";		echo "  <td valign=top>";		if ($id == 0) {			echo "<TARGETTIMEX3>$string</TARGETTIMEX3>\n";		} else {			echo "$string\n";		}		$openTag = '';		$closeTag = ''; 		if ($rel1 != $rel2) {			$openTag = '<font color=red>';			$closeTag = '</font>';		}		# if there is a relation type (and therefore a tlink)...		if ($rel1) {			$checkedB = '';			$checkedA = '';			$checkedO = '';			$checkedV = '';			$checkedBO = '';			$checkedOA = '';			$checkedBA = '';			$checkedNR = '';			# default is that there is no relation type			$selectedRel = '';			# overrule if both annotator gave same relation			if ($rel1 == $rel2) {				$selectedRel = $rel1;			}						# overrule with adjuducation value			$adjRel = $adjudications[$lid]['adj'];			echo "$adjRel<br>";			if ($adjRel) {				$selectedRel = shortenRel($adjRel);			}			if ($selectedRel == 'B') { $checkedB = ' checked'; }			if ($selectedRel == 'A') { $checkedA = ' checked'; }			if ($selectedRel == 'O') { $checkedO = ' checked'; }			if ($selectedRel == 'V') { $checkedV = ' checked'; }			if ($selectedRel == 'BO') { $checkedBO = ' checked'; }			if ($selectedRel == 'OA') { $checkedOA = ' checked'; }			if ($selectedRel == 'BA') { $checkedBA = ' checked'; }			if ($selectedRel == 'NR') { $checkedNR = ' checked'; }			echo "  <td valign=center>&nbsp;$openTag$rel1:$rel2:$rel3$closeTag\n";			echo "  <td valign=center width=120>\n";			echo "    <table border=0 cellpadding=2 height=10>\n";   		 	echo "      <tr>\n";			echo "        <td><input type=radio name=$lid value=B $checkedB>B</td>\n";			echo "        <td><input type=radio name=$lid value=O $checkedO>O</td>\n";			echo "        <td><input type=radio name=$lid value=A $checkedA>A</td>\n";			echo "        <td><input type=radio name=$lid value=NR $checkedNR>V</td>\n";			echo "        <td><input type=radio name=$lid value=BO $checkedBO>BO</td>\n";			echo "        <td><input type=radio name=$lid value=OA $checkedOA>OA</td>\n";			echo "      </tr>\n";			echo "    </table>\n";		}	}	echo "</table>\n";?><p><input type="submit" value="Submit Judgements" /></p></FORM>  <form action="adminArticles.php" method="get">  <input type="hidden" name="login" value="<?php echo $login; ?>" />  <input type="submit" value="Document List" />  </form><hr><!--<table><tr><td>  <form action="adminLogin.php" method="get">  <input type="hidden" name="login" value="<?php echo $login; ?>" />  <input type="submit" value="Home" />  </form><td>  <form action="adminArticles.php" method="get">  <input type="hidden" name="login" value="<?php echo $login; ?>" />  <input type="submit" value="Document List" />  </form></table>--></body></html>