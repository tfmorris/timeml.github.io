<?php require('utils.php');$fileName = $HTTP_GET_VARS['file'];$events = allEventRowsForDocument($fileName,$EVENTS_TABLE);$instances = allEventRowsForDocument($fileName,$INSTANCES_TABLE);$title = "Events in $fileName";function offset_cmp($a, $b) {   	if ($a["sentid"] == $b["sentid"]) { return 0; }	return ($a["sentid"] < $b["sentid"]) ? -1 : 1;}$eventHash = Array();foreach ($events as $event) {	$eid = $event['eid'];	$eventHash[$eid] = $event;}foreach ($instances as $instance) {	$eid = $instance['eid'];	$instance['eid'] = $eid;	$instance['tmlfile'] = '';	$instance['text'] = $eventHash[$eid]['text'];	$instance['stem'] = $eventHash[$eid]['stem'];	$instance['class'] = $eventHash[$eid]['class'];	$instance['sentid'] = $eventHash[$eid]['sentid'];	$mergedInfo[] = $instance;}usort($mergedInfo, "offset_cmp");?><!doctype html public "-//W3C//DTD HTML 4.0 //EN"> <html><head><title><?php echo $title; ?></title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><link href="timebank.css" rel="stylesheet" type="text/css"><script src='setPointer.js' language="JavaScript" type="text/JavaScript"></script><script language="JavaScript" type="text/JavaScript"><!--var browser;if (navigator.appName == "Netscape"){   	browser="NN"; } else if (navigator.userAgent.indexOf("MSIE")!= -1){    browser="IE"; } else {    browser="Unknown"; }function setStatus (win,eid1,eiid1,tid1,rel,eid2,eiid2,tid2,str1,str2) {  var tleft, tright;  if (eid1) { tleft = str1 + " [" + eid1 + " " + eiid1 + "]"; }  else { tleft = str1 + " [" + tid1 + "]"; }  if (eid2) { tright = str2 + " [" + eid2 + " " + eiid2 + "]"; }  else { tright = str2 + " [" + tid2 + "]"; }  var statusText = tleft + " -- " + rel + " --> " + tright;   win.status = statusText;  var element = window.opener.document.getElementById("linkdata");  element.setAttribute("value",statusText);}function rowOver (sender) {  setPointer(sender,'over','#dddddd','#ccffcc','#ffcc99');}function rowOut (sender) {  setPointer(sender,'out','#dddddd','#ccffcc','#ffcc99'); }function rowClick (sender,ids) {  highlightTags(ids);  //setPointer(sender,'click','#dddddd','#ccffcc','#ffcc99');}function highlightTags (ids) {	var savedTag, element;		//var debugWin = window.open("","debug","width=400,height=200,scrollbars=yes,resizable=yes");	//debugWin.document.open();	//debugWin.document.write("highlightTags(" + ids + ")<br>\n");	//debugWin.document.write("&nbsp;&nbsp;browser=" + browser + "<br>\n");	//debugWin.document.write("&nbsp;&nbsp;removing highlights from \n");	//debugWin.document.write("[" + window.opener.savedTags.toString() + "]<br>\n");  	for (var i = 0; i < window.opener.savedTags.length; i++) {		savedTag = window.opener.savedTags[i];		if (browser == 'IE') {			element = window.opener.document.all[savedTag]; 			element.style.backgroundColor = '#ffffff'; }		else {			element = window.opener.document.getElementById(savedTag);			element.setAttribute("class","None"); }		//debugWin.document.write("&nbsp;&nbsp;&nbsp;&nbsp;tag=" + element.innerHTML + "<br>\n"); 	}	//debugWin.document.write("&nbsp;&nbsp;resetting savedTags array<br>\n");  	window.opener.savedTags = new Array();	//debugWin.document.write("&nbsp;&nbsp;adding highlights<br>\n");  	for (var i = 0; i < ids.length; i++) {		// do not use push(ids[i]) or even concat(ids[i]) for IE5		window.opener.savedTags[window.opener.savedTags.length] = ids[i];		if (browser == 'IE') {			element = window.opener.document.all[ids[i]]; 			element.style.backgroundColor = '#cccccc'; }		else {			element = window.opener.document.getElementById(ids[i]); 			element.setAttribute("class","highlight"); }		//debugWin.document.write("&nbsp;&nbsp;&nbsp;&nbsp;tag=" + element.innerHTML + "<br>\n"); 	}	//debugWin.document.close();}//--></script></head><body><h2><?php echo $title; ?></h2><table cellpadding="5"><tr>	<th bgcolor="#CCCCCC">s</td>	<th bgcolor="#CCCCCC">event</td>	<th bgcolor="#CCCCCC">stem</td>	<th bgcolor="#CCCCCC">pos</td>	<th bgcolor="#CCCCCC">class</td>	<th bgcolor="#CCCCCC">tense</td>	<th bgcolor="#CCCCCC">aspect</td>	<th bgcolor="#CCCCCC">pol</td>	<th bgcolor="#CCCCCC">card</td>	<th bgcolor="#CCCCCC">mod</td>	<th bgcolor="#CCCCCC">sig</td></tr><?phpforeach ($mergedInfo as $row) {	$eid = $row['eid'];	$eiid = $row['eiid'];	$text = $row['text'];	$stem = $row['stem'];	$class = $row['class'];	$tense = $row['tense'];	$aspect = $row['aspect'];	$pos = $row['pos'];	$card = $row['cardinality'];	$pol = $row['polarity'];	$mod = $row['modality'];	$sig = $row['signalID'];	$sentID = $row['sentid'];	$text = str_replace(" ","&nbsp;",$text);	$strDisplay = "<span class=event>" . $text . "</span><sup>" . $eid . ',' . $eiid . "</sup>";		$tags = "[\"$eid\"]";?>  <tr 	onmouseover=javascript:rowOver(this)	onmouseout=javascript:rowOut(this)	onclick=javascript:rowClick(this,<?php echo "$tags"; ?>)	<td valign=bottom bgcolor="#dddddd"><?php echo $sentID ?></td>	<td valign=bottom bgcolor="#dddddd"><?php echo $strDisplay ?></td>	<td valign=bottom bgcolor="#dddddd"><?php echo $stem ?></td>	<td valign=bottom bgcolor="#dddddd"><?php echo strtolower($pos) ?></td>	<td valign=bottom bgcolor="#dddddd"><?php echo strtolower($class) ?></td>	<td valign=bottom bgcolor="#dddddd"><?php echo strtolower($tense) ?></td>	<td valign=bottom bgcolor="#dddddd"><?php echo strtolower($aspect) ?></td>	<td valign=bottom bgcolor="#dddddd"><?php echo strtolower($pol) ?></td>	<td valign=bottom bgcolor="#dddddd"><?php echo $card ?></td>	<td valign=bottom bgcolor="#dddddd"><?php echo $mod ?></td>	<td valign=bottom bgcolor="#dddddd"><?php echo $sig ?></td></tr><?php}?></table></body></html>